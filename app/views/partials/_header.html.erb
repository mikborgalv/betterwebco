<header class="navbar navbar-dark bg-dark navbar-expand-lg shadow-sm" data-controller="header">
  <div class="container-fluid">
    <!-- Company Logo and Name -->
    <%= link_to root_path, class: "navbar-brand d-flex align-items-center" do %>
      <%# image_tag "betterwebco_logo.png", alt: "BetterWebCo Logo", class: "me-2", width: "30" %>
      <span class="h5 mb-0">BetterWebCo</span>
    <% end %>

    <!-- Mobile Toggle Button -->
    <button 
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
      data-action="header#toggleMenu">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Navigation Links -->
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav" data-header-target="menu">
      <ul class="navbar-nav">
        <li class="nav-item">
          <%= link_to "Our Services", static_pages_our_services_path, class: "nav-link" %>
        </li>
        <li class="nav-item">
          <%= link_to "Our Process", static_pages_our_process_path, class: "nav-link" %>
        </li>
        <li class="nav-item">
          <%= link_to "Contact Us", new_customer_path, class: "nav-link" %>
        </li>
        <li class="nav-item">
          <%= link_to "Faq's", static_pages_search_path, class: "nav-link" %>
        </li>

        <%# Devise login/logout logic with Turbo-compatible button_to %>
        <% if user_signed_in? || admin_user_signed_in? %>
          <li class="nav-item dropdown">
            <% current_name = user_signed_in? ? current_user.email : current_admin_user.email %>
            <a class="nav-link dropdown-toggle" href="#" id="userMenu" role="button" data-bs-toggle="dropdown">
              ðŸ‘‹ <%= current_name %>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userMenu">
              <% if admin_user_signed_in? %>
                <li>
                  <%= link_to "Admin Dashboard", admin_root_path, class: "dropdown-item" %>
                </li>
              <% end %>
              <li>
                <%# Turbo-safe logout button %>
                <%= button_to(
                      user_signed_in? ? destroy_user_session_path : "/admin/logout",
                      method: :delete,
                      form: { data: { turbo: true } },
                      class: "dropdown-item"
                    ) do %>
                  Sign Out
                <% end %>
              </li>
            </ul>
          </li>
        <% else %>
          <li class="nav-item">
            <%= link_to "Sign In", new_user_session_path, class: "nav-link btn btn-outline-light ms-2" %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</header>

